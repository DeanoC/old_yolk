//!---------------------------------------------------------------------------
//!
//!	\file debug_win.h
//!	templated DebugLog for Windows systems
//!
//!---------------------------------------------------------------------------

#pragma once

#ifndef WIERD_CORE_DEBUG_WIN_H
#define WIERD_CORE_DEBUG_WIN_H


//---------------------------------------------------------------------------
// Defines
//---------------------------------------------------------------------------

//---------------------------------------------------------------------------
// Includes
//---------------------------------------------------------------------------
//#if defined(_DEBUG)
//#	define _CRTDBG_MAP_ALLOC
//#endif

#include <sstream>
//#include <crtdbg.h>

//---------------------------------------------------------------------------
// Enums and typedefs
//---------------------------------------------------------------------------

//---------------------------------------------------------------------------
// Classes and structures
//---------------------------------------------------------------------------

extern bool InWinCrtReportLog;

//---------------------------------------------------------------------------
//!	Output to the VC6 debug console the type
//---------------------------------------------------------------------------
template<class T>
void DebugInfo(T& in)
{
	std::ostringstream out;
	out << in;
   InWinCrtReportLog = true;
	_RPT0(_CRT_WARN, out.str().c_str() );
   InWinCrtReportLog = false;
//	printf( out.str().c_str() );
}

//---------------------------------------------------------------------------
//!	Output to the VC6 debug console the type
//---------------------------------------------------------------------------
template<class T>
void DebugError(T& in)
{
	std::ostringstream out;
	out << in;
   InWinCrtReportLog = true;
	_RPT0(_CRT_ERROR, out.str().c_str() );
   InWinCrtReportLog = false;
//	printf( out.str().c_str() );
}

inline void DebugLogNL()
{
   InWinCrtReportLog = true;
	_RPT0(_CRT_WARN, "\n" );
   InWinCrtReportLog = false;
//	printf( "\n" );
}


//---------------------------------------------------------------------------
// Prototypes
//---------------------------------------------------------------------------

//---------------------------------------------------------------------------
// Externals
//---------------------------------------------------------------------------

//---------------------------------------------------------------------------
// End Header file
//---------------------------------------------------------------------------
#endif
